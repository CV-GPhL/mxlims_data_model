{
    "$defs": {
        "BaseModel": {
            "properties": {},
            "title": "BaseModel",
            "type": "object"
        },
        "FileType": {
            "description": "Name for file type, used in ReflectionSet class",
            "enum": [
                "scaled and merged MTZ",
                "scaled and unmerged MTZ",
                "unmerged MTZ",
                "XDS INTEGRATE.HKL (https://xds.mr.mpg.de/html_doc/xds_files.html#INTEGRATE.HKL); unmerged",
                "XDS XDS_ASCII.HKL (https://xds.mr.mpg.de/html_doc/xds_files.html#XDS_ASCII.HKL); scaled and unmerged"
            ],
            "title": "FileType",
            "type": "string"
        },
        "LogisticalSampleRef": {
            "description": "Reference to LogisticalSample object, for use in JSON files.",
            "properties": {
                "mxlims_type": {
                    "const": "MxlimsObjectRef",
                    "enum": [
                        "MxlimsObjectRef"
                    ],
                    "title": "Mxlims Type",
                    "type": "string"
                },
                "target_uuid": {
                    "description": "UUID of target MXLIMS model object",
                    "title": "Target Uuid",
                    "type": "string"
                },
                "target_type": {
                    "const": "LogisticalSample",
                    "enum": [
                        "LogisticalSample"
                    ],
                    "title": "Target Type",
                    "type": "string"
                }
            },
            "required": [
                "mxlims_type",
                "target_uuid",
                "target_type"
            ],
            "title": "LogisticalSampleRef",
            "type": "object"
        },
        "MXProcessingRef": {
            "description": "Reference to MXProcessing object, for use in JSON files.",
            "properties": {
                "mxlims_type": {
                    "const": "MxlimsObjectRef",
                    "enum": [
                        "MxlimsObjectRef"
                    ],
                    "title": "Mxlims Type",
                    "type": "string"
                },
                "target_uuid": {
                    "description": "UUID of target MXLIMS model object",
                    "title": "Target Uuid",
                    "type": "string"
                },
                "target_type": {
                    "const": "MXProcessing",
                    "enum": [
                        "MXProcessing"
                    ],
                    "title": "Target Type",
                    "type": "string"
                }
            },
            "required": [
                "mxlims_type",
                "target_uuid",
                "target_type"
            ],
            "title": "MXProcessingRef",
            "type": "object"
        },
        "PdbxSignalType": {
            "description": "Observability criterion. Matches mmCIF refln.pdbx_signal_status",
            "enum": [
                "local <I/sigmaI>",
                "local wCC_half"
            ],
            "title": "PdbxSignalType",
            "type": "string"
        },
        "QualityFactor": {
            "description": "Reflection shell quality factor. Enumerated type with associated value\n\nCompleteness is given in %, 0 <= Completeness <= 100",
            "properties": {
                "type": {
                    "allOf": [
                        {
                            "$ref": "#/$defs/QualityFactorType"
                        }
                    ],
                    "description": "Quality factor type"
                },
                "value": {
                    "description": "Quality factor value",
                    "title": "Value",
                    "type": "number"
                }
            },
            "required": [
                "type",
                "value"
            ],
            "title": "QualityFactor",
            "type": "object"
        },
        "QualityFactorType": {
            "description": "Name for quality factor type, used in QualityFactor class",
            "enum": [
                "R(merge)",
                "R(meas)",
                "R(pim)",
                "I/SigI",
                "CC(1/2)",
                "CC(ano)",
                "SigAno",
                "Completeness",
                "Redundancy",
                "RedundancyAno"
            ],
            "title": "QualityFactorType",
            "type": "string"
        },
        "ReflectionBinningMode": {
            "description": "Reflection binning mode for binning reflection statistics",
            "enum": [
                "equal_volume",
                "equal_number",
                "dstar_equidistant",
                "dstar2_equidistant"
            ],
            "title": "ReflectionBinningMode",
            "type": "string"
        },
        "ReflectionSetRef": {
            "description": "Reference to ReflectionSet object, for use in JSON files.",
            "properties": {
                "target_type": {
                    "const": "ReflectionSet",
                    "enum": [
                        "ReflectionSet"
                    ],
                    "title": "Target Type",
                    "type": "string"
                }
            },
            "required": [
                "target_type"
            ],
            "title": "ReflectionSetRef",
            "type": "object"
        },
        "ReflectionStatistics": {
            "description": "Reflection statistics for a shell (or all) of reflections",
            "properties": {
                "resolution_limits": {
                    "description": "lower, higher resolution limit of shell - matches mmCIF d_res_high, d_res_low.",
                    "maxItems": 2,
                    "minItems": 2,
                    "prefixItems": [
                        {
                            "type": "number"
                        },
                        {
                            "type": "number"
                        }
                    ],
                    "title": "Resolution Limits",
                    "type": "array"
                },
                "number_observations": {
                    "anyOf": [
                        {
                            "minimum": 0,
                            "type": "integer"
                        },
                        {
                            "type": "null"
                        }
                    ],
                    "default": null,
                    "description": "total number of observations, - NBNB matches WHICH mmCIF parameter?",
                    "title": "Number Observations"
                },
                "number_unique_observations": {
                    "anyOf": [
                        {
                            "minimum": 0,
                            "type": "integer"
                        },
                        {
                            "type": "null"
                        }
                    ],
                    "default": null,
                    "description": "total number of unique observations, - NBNB matches WHICH mmCIF parameter?",
                    "title": "Number Unique Observations"
                },
                "quality_factors": {
                    "description": "Quality factors for reflection shell, ",
                    "items": {
                        "$ref": "#/$defs/QualityFactor"
                    },
                    "title": "Quality Factors",
                    "type": "array"
                },
                "chi_squared": {
                    "anyOf": [
                        {
                            "minimum": 0.0,
                            "type": "number"
                        },
                        {
                            "type": "null"
                        }
                    ],
                    "default": null,
                    "description": "Chi-squared statistic for reflection shell, matches mmCIF pdbx_chi_squared",
                    "title": "Chi Squared"
                },
                "number_rejected_reflns": {
                    "anyOf": [
                        {
                            "minimum": 0,
                            "type": "integer"
                        },
                        {
                            "type": "null"
                        }
                    ],
                    "default": null,
                    "description": "Number of rejected reflns for reflection shell, matches pdbx_rejects",
                    "title": "Number Rejected Reflns"
                }
            },
            "required": [
                "resolution_limits"
            ],
            "title": "ReflectionStatistics",
            "type": "object"
        },
        "Tensor": {
            "description": "Tensor",
            "properties": {
                "eigenvalues": {
                    "description": "Eigenvalues of tensor",
                    "maxItems": 3,
                    "minItems": 3,
                    "prefixItems": [
                        {
                            "type": "number"
                        },
                        {
                            "type": "number"
                        },
                        {
                            "type": "number"
                        }
                    ],
                    "title": "Eigenvalues",
                    "type": "array"
                },
                "eigenvectors": {
                    "description": "Eigenvectors (unit vectors) of tensor, in same order as eigenvalues",
                    "items": {
                        "maxItems": 3,
                        "minItems": 3,
                        "prefixItems": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "number"
                            },
                            {
                                "type": "number"
                            }
                        ],
                        "type": "array"
                    },
                    "title": "Eigenvectors",
                    "type": "array"
                }
            },
            "required": [
                "eigenvalues",
                "eigenvectors"
            ],
            "title": "Tensor",
            "type": "object"
        },
        "UnitCell": {
            "description": "Crystallographic unit cell",
            "properties": {
                "a": {
                    "description": "A axis length (A)",
                    "minimum": 0.0,
                    "title": "A",
                    "type": "number"
                },
                "b": {
                    "description": "B axis length (A)",
                    "minimum": 0.0,
                    "title": "B",
                    "type": "number"
                },
                "c": {
                    "description": "C axis length (A)",
                    "minimum": 0.0,
                    "title": "C",
                    "type": "number"
                },
                "alpha": {
                    "description": "alpha angle (degree)",
                    "minimum": 0.0,
                    "title": "Alpha",
                    "type": "number"
                },
                "beta": {
                    "description": "beta angle (degree)",
                    "minimum": 0.0,
                    "title": "Beta",
                    "type": "number"
                },
                "gamma": {
                    "description": "gamma angle (degree)",
                    "minimum": 0.0,
                    "title": "Gamma",
                    "type": "number"
                }
            },
            "required": [
                "a",
                "b",
                "c",
                "alpha",
                "beta",
                "gamma"
            ],
            "title": "UnitCell",
            "type": "object"
        }
    },
    "description": "Processed reflections, possibly merged or scaled\n\nas might be stored within a MTZ or mmCIF reflection file",
    "properties": {
        "mxlims_type": {
            "const": "ReflectionSet",
            "enum": [
                "ReflectionSet"
            ],
            "title": "Mxlims Type",
            "type": "string"
        },
        "uuid": {
            "description": "Permanent unique identifier string",
            "title": "Uuid",
            "type": "string"
        },
        "extensions": {
            "description": "Keyword-value dictionary string:Any of extensions.Use is accepted but discouraged",
            "title": "Extensions",
            "type": "object"
        },
        "namespace_extensions": {
            "additionalProperties": {
                "$ref": "#/$defs/BaseModel"
            },
            "description": "Keyword-value dictionary of namespaced extension. Key is an organisation identifier (e.g. 'GPhL' or 'ESRF'), value is a Pydantic model defined by this organisation.",
            "title": "Namespace Extensions",
            "type": "object"
        },
        "source_ref": {
            "anyOf": [
                {
                    "$ref": "#/$defs/MXProcessingRef"
                },
                {
                    "type": "null"
                }
            ],
            "default": null,
            "description": "Reference to Job that created this Dataset"
        },
        "role": {
            "anyOf": [
                {
                    "type": "string"
                },
                {
                    "type": "null"
                }
            ],
            "default": null,
            "description": "Role of Dataset realtive to the source Job.Intended for filtering of Datasets",
            "examples": [
                "Result",
                "Intermediate",
                "Characterisation",
                "Centring"
            ],
            "title": "Role"
        },
        "logistical_sample_ref": {
            "anyOf": [
                {
                    "$ref": "#/$defs/LogisticalSampleRef"
                },
                {
                    "type": "null"
                }
            ],
            "default": null,
            "description": "Reference to LogisticalSample that pertains specifically this Dataset"
        },
        "derived_from_ref": {
            "anyOf": [
                {
                    "$ref": "#/$defs/ReflectionSetRef"
                },
                {
                    "type": "null"
                }
            ],
            "default": null,
            "description": "Reference to Dataset from which this Dataset was derived. Used for modified Datasets without a 'source_ref' link, e.g. when removing images from a sweep before processing."
        },
        "derived_dataset_refs": {
            "description": "List of references to Datasets derived from Dataset.",
            "items": {
                "$ref": "#/$defs/ReflectionSetRef"
            },
            "title": "Derived Dataset Refs",
            "type": "array"
        },
        "anisotropic_diffraction": {
            "default": false,
            "description": "Is diffraction limit analysis based on aniosotropic diffraction limits? True/False ",
            "title": "Anisotropic Diffraction",
            "type": "boolean"
        },
        "resolution_rings_detected": {
            "description": "Resolution rings detected as originating from ice, powder diffraction etc.; given as a pair of floats (A) with decreasing value, i.e. low- and high-resolution limits",
            "items": {
                "maxItems": 2,
                "minItems": 2,
                "prefixItems": [
                    {
                        "type": "number"
                    },
                    {
                        "type": "number"
                    }
                ],
                "type": "array"
            },
            "title": "Resolution Rings Detected",
            "type": "array"
        },
        "resolution_rings_excluded": {
            "description": "Resolution rings excluded from calculation; given as a pair of floats (A) with decreasing value, i.e. low- and high-resolution limits)",
            "items": {
                "maxItems": 2,
                "minItems": 2,
                "prefixItems": [
                    {
                        "type": "number"
                    },
                    {
                        "type": "number"
                    }
                ],
                "type": "array"
            },
            "title": "Resolution Rings Excluded",
            "type": "array"
        },
        "unit_cell": {
            "anyOf": [
                {
                    "$ref": "#/$defs/UnitCell"
                },
                {
                    "type": "null"
                }
            ],
            "default": null,
            "description": "Unit cell determined"
        },
        "space_group_name": {
            "anyOf": [
                {
                    "type": "string"
                },
                {
                    "type": "null"
                }
            ],
            "default": null,
            "description": "Name of detected space group. Names may include alternative settings.",
            "title": "Space Group Name"
        },
        "operational_resolution": {
            "anyOf": [
                {
                    "type": "number"
                },
                {
                    "type": "null"
                }
            ],
            "default": null,
            "description": "Operational resolution (A) matching observed_criteria.",
            "title": "Operational Resolution"
        },
        "B_iso_Wilson_estimate": {
            "anyOf": [
                {
                    "type": "number"
                },
                {
                    "type": "null"
                }
            ],
            "default": null,
            "description": "estimated (isotropic) temperature factor from slope of Wilson plot - matches mmCIF reflns.B_iso_Wilson_estimate (https://mmcif.wwpdb.org/dictionaries/mmcif_pdbx_v50.dic/Items/_reflns.B_iso_Wilson_estimate.html)",
            "title": "B Iso Wilson Estimate"
        },
        "h_index_range": {
            "description": "low and high limit on Miller index h - matches mmCIF reflns.limit_h_min (https://mmcif.wwpdb.org/dictionaries/mmcif_pdbx_v50.dic/Items/_reflns.limit_h_min.html) and reflns.limit_h_max (https://mmcif.wwpdb.org/dictionaries/mmcif_pdbx_v50.dic/Items/_reflns.limit_h_max.html)",
            "maxItems": 2,
            "minItems": 2,
            "prefixItems": [
                {
                    "type": "integer"
                },
                {
                    "type": "integer"
                }
            ],
            "title": "H Index Range",
            "type": "array"
        },
        "k_index_range": {
            "description": "low and high limit on Miller index k - matches mmCIF reflns.limit_k_min (https://mmcif.wwpdb.org/dictionaries/mmcif_pdbx_v50.dic/Items/_reflns.limit_k_min.html) and reflns.limit_k_max (https://mmcif.wwpdb.org/dictionaries/mmcif_pdbx_v50.dic/Items/_reflns.limit_k_max.html)",
            "maxItems": 2,
            "minItems": 2,
            "prefixItems": [
                {
                    "type": "integer"
                },
                {
                    "type": "integer"
                }
            ],
            "title": "K Index Range",
            "type": "array"
        },
        "l_index_range": {
            "description": "low and high limit on Miller index l - matches mmCIF reflns.limit_l_min (https://mmcif.wwpdb.org/dictionaries/mmcif_pdbx_v50.dic/Items/_reflns.limit_l_min.html) and reflns.limit_l_max (https://mmcif.wwpdb.org/dictionaries/mmcif_pdbx_v50.dic/Items/_reflns.limit_l_max.html)",
            "maxItems": 2,
            "minItems": 2,
            "prefixItems": [
                {
                    "type": "integer"
                },
                {
                    "type": "integer"
                }
            ],
            "title": "L Index Range",
            "type": "array"
        },
        "num_reflections": {
            "anyOf": [
                {
                    "minimum": 0,
                    "type": "integer"
                },
                {
                    "type": "null"
                }
            ],
            "default": null,
            "description": "Total number of measured reflections - matches mmCIF reflns.pdbx_number_measured_all (https://mmcif.wwpdb.org/dictionaries/mmcif_pdbx_v50.dic/Items/_reflns.pdbx_number_measured_all.html)",
            "title": "Num Reflections"
        },
        "num_unique_reflections": {
            "anyOf": [
                {
                    "minimum": 0,
                    "type": "integer"
                },
                {
                    "type": "null"
                }
            ],
            "default": null,
            "description": "Total number of unique reflections - matches mmCIF reflns.number_obs (https://mmcif.wwpdb.org/dictionaries/mmcif_pdbx_v50.dic/Items/_reflns.number_obs.html)",
            "title": "Num Unique Reflections"
        },
        "aniso_B_tensor": {
            "anyOf": [
                {
                    "$ref": "#/$defs/Tensor"
                },
                {
                    "type": "null"
                }
            ],
            "default": null,
            "description": "Anisotropic B tensor, matching mmCIF items reflns.pdbx_aniso_B_tensor_eigenvalue_{1,2,3} and reflns.pdbx_aniso_B_tensor_eigenvector_{1,2,3}_ortho[{1,2,3}] (https://mmcif.wwpdb.org/dictionaries/mmcif_pdbx_v50.dic/Items/_reflns.pdbx_aniso_B_tensor_eigenvalue_1.html)"
        },
        "diffraction_limits_estimated": {
            "anyOf": [
                {
                    "$ref": "#/$defs/Tensor"
                },
                {
                    "type": "null"
                }
            ],
            "default": null,
            "description": "Principal axes lengths (A) of ellipsoid describing reciprocal space region containing observable reflections, regardless whether all have actually been observed. Matches mmCIF reflns.pdbx_aniso_diffraction_limit_{1,2,3} (https://mmcif.wwpdb.org/dictionaries/mmcif_pdbx_v50.dic/Items/_reflns.pdbx_aniso_diffraction_limit_1.html)"
        },
        "overall_refln_statistics": {
            "anyOf": [
                {
                    "$ref": "#/$defs/ReflectionStatistics"
                },
                {
                    "type": "null"
                }
            ],
            "default": null,
            "description": "Reflection statistics for all processed reflections"
        },
        "refln_shells": {
            "description": "Reflection statistics per resolution shell",
            "items": {
                "$ref": "#/$defs/ReflectionStatistics"
            },
            "title": "Refln Shells",
            "type": "array"
        },
        "signal_type": {
            "anyOf": [
                {
                    "$ref": "#/$defs/PdbxSignalType"
                },
                {
                    "type": "null"
                }
            ],
            "default": null,
            "description": "'local <I/sigmaI>', 'local wCC_half'; matches reflns.pdbx_signal_type (https://mmcif.wwpdb.org/dictionaries/mmcif_pdbx_v50.dic/Items/_reflns.pdbx_signal_type.html). Criterion for observability, as used in mmCIF refln.pdbx_signal_status (https://mmcif.wwpdb.org/dictionaries/mmcif_pdbx_v50.dic/Items/_refln.pdbx_signal_status.html)"
        },
        "signal_cutoff": {
            "anyOf": [
                {
                    "type": "number"
                },
                {
                    "type": "null"
                }
            ],
            "default": null,
            "description": "Limiting value for signal calculation; matches reflns.pdbx_observed_signal_threshold (https://mmcif.wwpdb.org/dictionaries/mmcif_pdbx_v50.dic/Items/_reflns.pdbx_observed_signal_threshold.html). Cutoff for observability, as used in mmCIF refln.pdbx_signal_status (https://mmcif.wwpdb.org/dictionaries/mmcif_pdbx_v50.dic/Items/_refln.pdbx_signal_status.html)",
            "title": "Signal Cutoff"
        },
        "resolution_cutoffs": {
            "description": "Criteria used in determination of isotropic resolution cut-off (e.g. as implemented in MRFANA, https://github.com/githubgphl/MRFANA)",
            "items": {
                "$ref": "#/$defs/QualityFactor"
            },
            "title": "Resolution Cutoffs",
            "type": "array"
        },
        "binning_mode": {
            "anyOf": [
                {
                    "$ref": "#/$defs/ReflectionBinningMode"
                },
                {
                    "type": "null"
                }
            ],
            "default": null,
            "description": "Binning mode for definition of resolution shells"
        },
        "number_bins": {
            "anyOf": [
                {
                    "exclusiveMinimum": 0,
                    "type": "integer"
                },
                {
                    "type": "null"
                }
            ],
            "default": null,
            "description": "Number of bins",
            "title": "Number Bins"
        },
        "refln_per_bin": {
            "anyOf": [
                {
                    "exclusiveMinimum": 0,
                    "type": "integer"
                },
                {
                    "type": "null"
                }
            ],
            "default": null,
            "description": "Number of reflections per bin",
            "title": "Refln Per Bin"
        },
        "refln_per_bin_per_sweep": {
            "anyOf": [
                {
                    "exclusiveMinimum": 0,
                    "type": "integer"
                },
                {
                    "type": "null"
                }
            ],
            "default": null,
            "description": "Number of reflections per bin per sweep (in multi-sweep experiment)",
            "title": "Refln Per Bin Per Sweep"
        },
        "file_type": {
            "anyOf": [
                {
                    "$ref": "#/$defs/FileType"
                },
                {
                    "type": "null"
                }
            ],
            "default": null,
            "description": "Type of file"
        },
        "filename": {
            "anyOf": [
                {
                    "type": "string"
                },
                {
                    "type": "null"
                }
            ],
            "default": null,
            "description": "File name.",
            "title": "Filename"
        },
        "path": {
            "anyOf": [
                {
                    "type": "string"
                },
                {
                    "type": "null"
                }
            ],
            "default": null,
            "description": "Path to directory containing reflection set file (defined by filename).",
            "title": "Path"
        }
    },
    "required": [
        "mxlims_type",
        "h_index_range",
        "k_index_range",
        "l_index_range"
    ],
    "title": "ReflectionSet",
    "type": "object"
}